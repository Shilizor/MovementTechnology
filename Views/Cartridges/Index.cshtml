@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager
@using Microsoft.AspNetCore.Identity
@using MovementTechnology.Data
@model IEnumerable<MovementTechnology.Data.Departament>
@{
var user = await UserManager.GetUserAsync(User);
}
@{
ViewData["Title"] = "Cartridges Page";
ViewData["nav_item_cartridge"] = "nav_item active";
}

<div class="bg">
    <div class="mainmenu">
        <div class="search">
            <img src="/img/searchicon.png" alt="" class="search_img">
            <input type="text" class="search_inp" placeholder="Поиск данных">
        </div>
        @if (SignInManager.IsSignedIn(User))
        {
        @if (user.privilege >= 1)
        {
        <a class="addbtn" onclick="showInPopup('@Url.Action("AddOrEditDep", "Departaments", null, Context.Request.Scheme)')">
            <img src="/img/addicon.png" alt="" class="addbtn_img">
            <p class="addbtn_text">Добавить</p>
        </a>
        }
        }
    </div>
    <div class="maincontentbg">
        <div class="maincontent">
            <table class="table">
                <colgroup>
                    <col style="width: 10%;">
                    <col style="width: 15%;">
                    <col style="width: 15%;">
                    <col style="width: 15%;">
                    <col style="width: 15%;">
                    @if (SignInManager.IsSignedIn(User))
                    {
                    @if (user.privilege >= 1)
                    {
                    <col style="width: 10%;">
                    <col style="width: 10%;">
                    <col style="width: 10%;">
                    }
                    }
                </colgroup>
                <thead>
                <tr>
                    <th class="is_sort" sort="id">Идентификатор</th>
                    <th class="is_sort" sort="cart_name">Название картриджа</th>
                    <th class="is_sort" sort="cart_model">Модель картриджа</th>
                    <th class="is_sort" sort="cart_substitutions">Количество заправок</th>
                    <th class="is_sort" sort="cart_technic">Используемая техника</th>
                    @if (SignInManager.IsSignedIn(User))
                    {
                    @if (user.privilege >= 1)
                    {
                    <th colspan="3">Действия</th>
                    }
                    }
                </tr>
                </thead>
                <tbody id="depToUpdate">
                </tbody>
            </table>
        </div>
    </div>

    <div class="modal-container">
        <div class="modal-window">
            <div class="modal-close">&times;</div>
            <div id="depToUpdate1"></div>
        </div>
    </div>
</div>
